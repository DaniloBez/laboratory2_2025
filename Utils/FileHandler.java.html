<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FileHandler.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Laboratory2_2025</a> &gt; <a href="index.source.html" class="el_package">Utils</a> &gt; <span class="el_source">FileHandler.java</span></div><h1>FileHandler.java</h1><pre class="source lang-java linenums">package Utils;

import java.io.*;

/**
 * Клас {@code FileHandler} відповідає за створення, читання та запис JSON-рядків у файл.
 */
public class FileHandler {
    private final String filePath;

    /**
     * Створює об'єкт {@code FileHandler} для роботи з файлом за вказаним шляхом.
     *
     * @param filePath шлях до файлу
     */
<span class="fc" id="L16">    public FileHandler(String filePath) {</span>
<span class="fc" id="L17">        this.filePath = filePath;</span>
<span class="fc" id="L18">    }</span>

    /**
     * Створює файл, якщо він не існує.
     *
     * @return результат створення файлу
     */
    public Result createFileIfNotExist() {
<span class="nc" id="L26">        File file = new File(filePath);</span>
<span class="nc bnc" id="L27" title="All 2 branches missed.">        if (!file.exists()) {</span>
            try {
<span class="nc" id="L29">                boolean created = file.createNewFile();</span>
<span class="nc bnc" id="L30" title="All 2 branches missed.">                if (!created) {</span>
<span class="nc" id="L31">                    return new Result(false, &quot;Помилка при створені файлу!&quot;);</span>
                }

<span class="nc" id="L34">                return new Result(true, &quot;Файл успішно створено!&quot;);</span>
<span class="nc" id="L35">            } catch (IOException e) {</span>
<span class="nc" id="L36">                return new Result(false, &quot;Помилка при створені файлу: &quot; + e.getMessage());</span>
            }
        }

<span class="nc" id="L40">        return new Result(true, &quot;Файл вже існує!&quot;);</span>
    }

    /**
     * Записує JSON-рядок у файл.
     *
     * @param jsonString JSON-рядок для запису
     * @return результат запису
     */
    public Result writeJSONStringInFile(String jsonString) {
        try {
<span class="nc" id="L51">            BufferedWriter writer = new BufferedWriter(new FileWriter(filePath));</span>
<span class="nc" id="L52">            writer.write(jsonString);</span>
<span class="nc" id="L53">            writer.close();</span>

<span class="nc" id="L55">            return new Result(true, &quot;Данні успішно записано!&quot;);</span>
        }
<span class="nc" id="L57">        catch (IOException e) {</span>
<span class="nc" id="L58">            return new Result(false, &quot;Помилка при записі даних: &quot; + e.getMessage());</span>
        }
    }

    /**
     * Зчитує JSON-рядок із файлу.
     *
     * @return результат зчитування (JSON або null, якщо файл порожній)
     */
    public Result readJSONStringFromFile() {
        try {
<span class="nc" id="L69">            BufferedReader reader = new BufferedReader(new FileReader(filePath));</span>
<span class="nc" id="L70">            StringBuilder jsonString = new StringBuilder();</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">            if (reader.ready()) {</span>
                while (true) {
<span class="nc" id="L73">                    String line = reader.readLine();</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">                    if (line == null)</span>
<span class="nc" id="L75">                        break;</span>

<span class="nc" id="L77">                    jsonString.append(line);</span>
<span class="nc" id="L78">                }</span>
<span class="nc" id="L79">                return new Result(true, jsonString.toString());</span>
            }
            else
<span class="nc" id="L82">                return new Result(true, null);</span>
<span class="nc" id="L83">        } catch (IOException e) {</span>
<span class="nc" id="L84">            return new Result(false, &quot;Помилка при читанні файлу: &quot; + e.getMessage());</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>